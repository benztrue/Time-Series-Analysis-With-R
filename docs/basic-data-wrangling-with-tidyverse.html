<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 3 Basic Data Wrangling with Tidyverse | Time Series Analysis With R</title>
  <meta name="description" content="Chapter 3 Basic Data Wrangling with Tidyverse | Time Series Analysis With R" />
  <meta name="generator" content="bookdown 0.21 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 3 Basic Data Wrangling with Tidyverse | Time Series Analysis With R" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 3 Basic Data Wrangling with Tidyverse | Time Series Analysis With R" />
  
  
  

<meta name="author" content="Nicola Righetti" />


<meta name="date" content="2021-03-17" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="getting-started-with-r.html"/>
<link rel="next" href="readings.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/accessible-code-block-0.0.1/empty-anchor.js"></script>
<link href="libs/anchor-sections-1.0/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0/anchor-sections.js"></script>


<style type="text/css">
code.sourceCode > span { display: inline-block; line-height: 1.25; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Time Series with R</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Time Series Analysis With R</a><ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#objectives"><i class="fa fa-check"></i><b>1.1</b> Objectives</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#lectures"><i class="fa fa-check"></i><b>1.2</b> Lectures</a></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#home-work"><i class="fa fa-check"></i><b>1.3</b> Home Work</a></li>
<li class="chapter" data-level="1.4" data-path="index.html"><a href="index.html#assessment"><i class="fa fa-check"></i><b>1.4</b> Assessment</a></li>
<li class="chapter" data-level="1.5" data-path="index.html"><a href="index.html#syllabus-and-readings"><i class="fa fa-check"></i><b>1.5</b> Syllabus and readings</a></li>
<li class="chapter" data-level="1.6" data-path="index.html"><a href="index.html#further-information-and-support"><i class="fa fa-check"></i><b>1.6</b> Further information and support</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="getting-started-with-r.html"><a href="getting-started-with-r.html"><i class="fa fa-check"></i><b>2</b> Getting started with R</a><ul>
<li class="chapter" data-level="2.1" data-path="getting-started-with-r.html"><a href="getting-started-with-r.html#rstudio-interface-and-data"><i class="fa fa-check"></i><b>2.1</b> RStudio Interface and Data</a><ul>
<li class="chapter" data-level="2.1.1" data-path="getting-started-with-r.html"><a href="getting-started-with-r.html#download-and-install-rstudio"><i class="fa fa-check"></i><b>2.1.1</b> Download and Install RStudio</a></li>
<li class="chapter" data-level="2.1.2" data-path="getting-started-with-r.html"><a href="getting-started-with-r.html#create-a-rstudio-project-and-import-data"><i class="fa fa-check"></i><b>2.1.2</b> Create a RStudio Project and Import data</a></li>
<li class="chapter" data-level="2.1.3" data-path="getting-started-with-r.html"><a href="getting-started-with-r.html#create-a-script"><i class="fa fa-check"></i><b>2.1.3</b> Create a Script</a></li>
<li class="chapter" data-level="2.1.4" data-path="getting-started-with-r.html"><a href="getting-started-with-r.html#the-rstudio-user-interface"><i class="fa fa-check"></i><b>2.1.4</b> The RStudio User Interface</a></li>
<li class="chapter" data-level="2.1.5" data-path="getting-started-with-r.html"><a href="getting-started-with-r.html#load-and-save-data"><i class="fa fa-check"></i><b>2.1.5</b> Load and Save Data</a></li>
<li class="chapter" data-level="2.1.6" data-path="getting-started-with-r.html"><a href="getting-started-with-r.html#create-new-folders"><i class="fa fa-check"></i><b>2.1.6</b> Create new Folders</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="getting-started-with-r.html"><a href="getting-started-with-r.html#basic-r"><i class="fa fa-check"></i><b>2.2</b> Basic R</a><ul>
<li class="chapter" data-level="2.2.1" data-path="getting-started-with-r.html"><a href="getting-started-with-r.html#objects"><i class="fa fa-check"></i><b>2.2.1</b> Objects</a></li>
<li class="chapter" data-level="2.2.2" data-path="getting-started-with-r.html"><a href="getting-started-with-r.html#functions"><i class="fa fa-check"></i><b>2.2.2</b> Functions</a></li>
<li class="chapter" data-level="2.2.3" data-path="getting-started-with-r.html"><a href="getting-started-with-r.html#data-types"><i class="fa fa-check"></i><b>2.2.3</b> Data Types</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="basic-data-wrangling-with-tidyverse.html"><a href="basic-data-wrangling-with-tidyverse.html"><i class="fa fa-check"></i><b>3</b> Basic Data Wrangling with Tidyverse</a><ul>
<li class="chapter" data-level="3.1" data-path="basic-data-wrangling-with-tidyverse.html"><a href="basic-data-wrangling-with-tidyverse.html#mutate"><i class="fa fa-check"></i><b>3.1</b> Mutate</a></li>
<li class="chapter" data-level="3.2" data-path="basic-data-wrangling-with-tidyverse.html"><a href="basic-data-wrangling-with-tidyverse.html#rename"><i class="fa fa-check"></i><b>3.2</b> Rename</a></li>
<li class="chapter" data-level="3.3" data-path="basic-data-wrangling-with-tidyverse.html"><a href="basic-data-wrangling-with-tidyverse.html#summarize"><i class="fa fa-check"></i><b>3.3</b> Summarize</a></li>
<li class="chapter" data-level="3.4" data-path="basic-data-wrangling-with-tidyverse.html"><a href="basic-data-wrangling-with-tidyverse.html#arrange"><i class="fa fa-check"></i><b>3.4</b> Arrange</a></li>
<li class="chapter" data-level="3.5" data-path="basic-data-wrangling-with-tidyverse.html"><a href="basic-data-wrangling-with-tidyverse.html#filter"><i class="fa fa-check"></i><b>3.5</b> Filter</a></li>
<li class="chapter" data-level="3.6" data-path="basic-data-wrangling-with-tidyverse.html"><a href="basic-data-wrangling-with-tidyverse.html#select"><i class="fa fa-check"></i><b>3.6</b> Select</a></li>
<li class="chapter" data-level="3.7" data-path="basic-data-wrangling-with-tidyverse.html"><a href="basic-data-wrangling-with-tidyverse.html#count-occurrences"><i class="fa fa-check"></i><b>3.7</b> Count occurrences</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="readings.html"><a href="readings.html"><i class="fa fa-check"></i><b>4</b> Readings</a><ul>
<li class="chapter" data-level="4.1" data-path="readings.html"><a href="readings.html#bibliographical-references"><i class="fa fa-check"></i><b>4.1</b> Bibliographical References</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Time Series Analysis With R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="basic-data-wrangling-with-tidyverse" class="section level1">
<h1><span class="header-section-number">Chapter 3</span> Basic Data Wrangling with Tidyverse</h1>
<p><a href="https://en.wikipedia.org/wiki/Data_wrangling">Data wrangling</a> <em>is the process of transforming and mapping data from one “raw” data form into another format with the intent of making it more appropriate and valuable for a variety of downstream purposes such as analytics. The goal of data wrangling is to assure quality and useful data. Data analysts typically spend the majority of their time in the process of data wrangling compared to the actual analysis of the data.</em></p>
<p>How to perform data wrangling operations in R:</p>
<ul>
<li>use basic R functions;</li>
<li>employ specific libraries such as <strong>tidyverse</strong>. Tidyverse is an R library composed of functions that allow users to perform basic and advanced data science operations. <a href="https://www.tidyverse.org">https://www.tidyverse.org</a>.</li>
</ul>
<p>In R, a <strong>library (or “package”)</strong> is a coherent collection of functions, usually created for specific purposes.</p>
<p>To work with the <em>tidyverse</em> library, it is necessary to install it first, by using the following command: <em>install.packages(“tidyverse”)</em>.</p>
<p>After having installed tidyverse (or any other library), it is necessary to load it, so as we can work with its functions in the current R session:</p>
<div class="sourceCode" id="cb56"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb56-1"><a href="basic-data-wrangling-with-tidyverse.html#cb56-1"></a><span class="co"># to load a library used the command library(NAME-OF-THE-LIBRARY)</span></span>
<span id="cb56-2"><a href="basic-data-wrangling-with-tidyverse.html#cb56-2"></a><span class="kw">library</span>(tidyverse)</span></code></pre></div>
<p>Tidyverse has a peculiar syntax that includes the so-called <a href="https://style.tidyverse.org/pipes.html"><strong>pipe</strong></a> operator: <strong>%&gt;%</strong>.</p>
<p>To manipulate data sets are useful the functions included in <a href="https://dplyr.tidyverse.org"><strong>dplyr</strong></a>: <em>a grammar of data manipulation, providing a consistent set of verbs that help you solve the most common data manipulation challenges</em>, such as <em>mutate</em>, <em>rename</em>, <em>summarize</em>.</p>
<div id="mutate" class="section level2">
<h2><span class="header-section-number">3.1</span> Mutate</h2>
<p>The function <strong>mutate</strong> adds new variables to a data.frame or overwrite existing variables.</p>
<div class="sourceCode" id="cb57"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb57-1"><a href="basic-data-wrangling-with-tidyverse.html#cb57-1"></a>new_dataframe &lt;-<span class="st"> </span>a_dataframe <span class="op">%&gt;%</span></span>
<span id="cb57-2"><a href="basic-data-wrangling-with-tidyverse.html#cb57-2"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">just_another_variable =</span> a_new_variable <span class="op">/</span><span class="st"> </span><span class="dv">3</span>)</span>
<span id="cb57-3"><a href="basic-data-wrangling-with-tidyverse.html#cb57-3"></a>  </span>
<span id="cb57-4"><a href="basic-data-wrangling-with-tidyverse.html#cb57-4"></a>new_dataframe</span></code></pre></div>
<pre><code>##    first_variable second_variable a_new_variable
## 1               1          Monday             12
## 2               2         Tuesday            261
## 3               3          Monday             45
## 4               4         Tuesday             29
## 5               5          Monday             54
## 6               6       Wednesday            234
## 7               7        Thursday             45
## 8               8       Wednesday             42
## 9               9        Thursday              6
## 10             10        Saturday            267
## 11             11          Sunday             87
## 12             12          Friday              3
## 13             13        Saturday             12
## 14             14          Sunday              9
##    just_another_variable
## 1               4.000000
## 2              87.000000
## 3              15.000000
## 4               9.666667
## 5              18.000000
## 6              78.000000
## 7              15.000000
## 8              14.000000
## 9               2.000000
## 10             89.000000
## 11             29.000000
## 12              1.000000
## 13              4.000000
## 14              3.000000</code></pre>
</div>
<div id="rename" class="section level2">
<h2><span class="header-section-number">3.2</span> Rename</h2>
<p>Rename is a function to change the name of columns (sometimes it can be useful).</p>
<div class="sourceCode" id="cb59"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb59-1"><a href="basic-data-wrangling-with-tidyverse.html#cb59-1"></a>new_dataframe &lt;-<span class="st"> </span>new_dataframe <span class="op">%&gt;%</span></span>
<span id="cb59-2"><a href="basic-data-wrangling-with-tidyverse.html#cb59-2"></a><span class="st">  </span><span class="co"># rename (new_name = old_name)</span></span>
<span id="cb59-3"><a href="basic-data-wrangling-with-tidyverse.html#cb59-3"></a><span class="st">  </span><span class="kw">rename</span>(<span class="dt">ID =</span> first_variable,</span>
<span id="cb59-4"><a href="basic-data-wrangling-with-tidyverse.html#cb59-4"></a>         <span class="dt">Day =</span> second_variable,</span>
<span id="cb59-5"><a href="basic-data-wrangling-with-tidyverse.html#cb59-5"></a>         <span class="dt">Tweets =</span> a_new_variable,</span>
<span id="cb59-6"><a href="basic-data-wrangling-with-tidyverse.html#cb59-6"></a>         <span class="dt">Users =</span> just_another_variable)</span>
<span id="cb59-7"><a href="basic-data-wrangling-with-tidyverse.html#cb59-7"></a></span>
<span id="cb59-8"><a href="basic-data-wrangling-with-tidyverse.html#cb59-8"></a>new_dataframe</span></code></pre></div>
<pre><code>##    ID       Day Tweets     Users
## 1   1    Monday     12  4.000000
## 2   2   Tuesday    261 87.000000
## 3   3    Monday     45 15.000000
## 4   4   Tuesday     29  9.666667
## 5   5    Monday     54 18.000000
## 6   6 Wednesday    234 78.000000
## 7   7  Thursday     45 15.000000
## 8   8 Wednesday     42 14.000000
## 9   9  Thursday      6  2.000000
## 10 10  Saturday    267 89.000000
## 11 11    Sunday     87 29.000000
## 12 12    Friday      3  1.000000
## 13 13  Saturday     12  4.000000
## 14 14    Sunday      9  3.000000</code></pre>
<p>The previous two steps can be performed at the same time, by concatenating the operations through the <em>pipe %&gt;%</em> operator.</p>
<div class="sourceCode" id="cb61"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb61-1"><a href="basic-data-wrangling-with-tidyverse.html#cb61-1"></a>new_dataframe &lt;-<span class="st"> </span>a_dataframe <span class="op">%&gt;%</span></span>
<span id="cb61-2"><a href="basic-data-wrangling-with-tidyverse.html#cb61-2"></a><span class="st">  </span><span class="co"># this is &quot;mutate&quot;, the first function we applied</span></span>
<span id="cb61-3"><a href="basic-data-wrangling-with-tidyverse.html#cb61-3"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">just_another_variable =</span> a_new_variable <span class="op">/</span><span class="st"> </span><span class="dv">3</span>) <span class="op">%&gt;%</span></span>
<span id="cb61-4"><a href="basic-data-wrangling-with-tidyverse.html#cb61-4"></a><span class="st">  </span><span class="co"># this is &quot;rename&quot;, the second function we applied</span></span>
<span id="cb61-5"><a href="basic-data-wrangling-with-tidyverse.html#cb61-5"></a><span class="st">  </span><span class="kw">rename</span>(<span class="dt">ID =</span> first_variable,</span>
<span id="cb61-6"><a href="basic-data-wrangling-with-tidyverse.html#cb61-6"></a>         <span class="dt">Day =</span> second_variable,</span>
<span id="cb61-7"><a href="basic-data-wrangling-with-tidyverse.html#cb61-7"></a>         <span class="dt">Tweets =</span> a_new_variable,</span>
<span id="cb61-8"><a href="basic-data-wrangling-with-tidyverse.html#cb61-8"></a>         <span class="dt">Users =</span> just_another_variable) </span>
<span id="cb61-9"><a href="basic-data-wrangling-with-tidyverse.html#cb61-9"></a>  </span>
<span id="cb61-10"><a href="basic-data-wrangling-with-tidyverse.html#cb61-10"></a>new_dataframe</span></code></pre></div>
<pre><code>##    ID       Day Tweets     Users
## 1   1    Monday     12  4.000000
## 2   2   Tuesday    261 87.000000
## 3   3    Monday     45 15.000000
## 4   4   Tuesday     29  9.666667
## 5   5    Monday     54 18.000000
## 6   6 Wednesday    234 78.000000
## 7   7  Thursday     45 15.000000
## 8   8 Wednesday     42 14.000000
## 9   9  Thursday      6  2.000000
## 10 10  Saturday    267 89.000000
## 11 11    Sunday     87 29.000000
## 12 12    Friday      3  1.000000
## 13 13  Saturday     12  4.000000
## 14 14    Sunday      9  3.000000</code></pre>
<p>To check the data format of the variables stored in the data.frame can be used the command <em>str()</em>:</p>
<div class="sourceCode" id="cb63"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb63-1"><a href="basic-data-wrangling-with-tidyverse.html#cb63-1"></a><span class="kw">str</span>(new_dataframe)</span></code></pre></div>
<pre><code>## &#39;data.frame&#39;:    14 obs. of  4 variables:
##  $ ID    : num  1 2 3 4 5 6 7 8 9 10 ...
##  $ Day   : Factor w/ 7 levels &quot;Friday&quot;,&quot;Monday&quot;,..: 2 6 2 6 2 7 5 7 5 3 ...
##  $ Tweets: num  12 261 45 29 54 234 45 42 6 267 ...
##  $ Users : num  4 87 15 9.67 18 ...</code></pre>
<p>Sometimes variables are stored in the data.frame in the wrong format (see the paragraph “data type”) and we want to convert them into a new data format. For this purpose we can use, again, the function <strong>mutate</strong>, along with other functions such <em>as.integer</em>, <em>as.numeric</em>, <em>as.character</em>, <em>as.factors</em>, or <em>as.logical</em>, <em>as.Date</em>, or <em>as.POSIXct()</em> based on the desired data format (it is possible and advisable to upload the data by paying attention to the type of data so as this step is not necessary).</p>
<div class="sourceCode" id="cb65"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb65-1"><a href="basic-data-wrangling-with-tidyverse.html#cb65-1"></a>new_dataframe &lt;-<span class="st"> </span>new_dataframe <span class="op">%&gt;%</span></span>
<span id="cb65-2"><a href="basic-data-wrangling-with-tidyverse.html#cb65-2"></a><span class="st">  </span><span class="co"># as.character to transform the &quot;ID&quot; column in a character variable</span></span>
<span id="cb65-3"><a href="basic-data-wrangling-with-tidyverse.html#cb65-3"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">ID =</span> <span class="kw">as.character</span>(ID),</span>
<span id="cb65-4"><a href="basic-data-wrangling-with-tidyverse.html#cb65-4"></a>         <span class="co"># as.integer to transform the values of the &quot;Tweets&quot; and &quot;Users&quot; column from numeric to integer</span></span>
<span id="cb65-5"><a href="basic-data-wrangling-with-tidyverse.html#cb65-5"></a>         <span class="dt">Tweets =</span> <span class="kw">as.integer</span>(Tweets),</span>
<span id="cb65-6"><a href="basic-data-wrangling-with-tidyverse.html#cb65-6"></a>         <span class="dt">Users =</span> <span class="kw">as.integer</span>(Users))</span>
<span id="cb65-7"><a href="basic-data-wrangling-with-tidyverse.html#cb65-7"></a></span>
<span id="cb65-8"><a href="basic-data-wrangling-with-tidyverse.html#cb65-8"></a>new_dataframe</span></code></pre></div>
<pre><code>##    ID       Day Tweets Users
## 1   1    Monday     12     4
## 2   2   Tuesday    261    87
## 3   3    Monday     45    15
## 4   4   Tuesday     29     9
## 5   5    Monday     54    18
## 6   6 Wednesday    234    78
## 7   7  Thursday     45    15
## 8   8 Wednesday     42    14
## 9   9  Thursday      6     2
## 10 10  Saturday    267    89
## 11 11    Sunday     87    29
## 12 12    Friday      3     1
## 13 13  Saturday     12     4
## 14 14    Sunday      9     3</code></pre>
<div class="sourceCode" id="cb67"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb67-1"><a href="basic-data-wrangling-with-tidyverse.html#cb67-1"></a><span class="kw">str</span>(new_dataframe)</span></code></pre></div>
<pre><code>## &#39;data.frame&#39;:    14 obs. of  4 variables:
##  $ ID    : chr  &quot;1&quot; &quot;2&quot; &quot;3&quot; &quot;4&quot; ...
##  $ Day   : Factor w/ 7 levels &quot;Friday&quot;,&quot;Monday&quot;,..: 2 6 2 6 2 7 5 7 5 3 ...
##  $ Tweets: int  12 261 45 29 54 234 45 42 6 267 ...
##  $ Users : int  4 87 15 9 18 78 15 14 2 89 ...</code></pre>
</div>
<div id="summarize" class="section level2">
<h2><span class="header-section-number">3.3</span> Summarize</h2>
<p>To aggregate data and calculate synthetic values (for instance, the average number of tweets <em>by day</em>), it can be used the function <em>group_by</em> (to aggregate data, for instance by day), and <em>summarize</em>, to calculate the summary values.</p>
<div class="sourceCode" id="cb69"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb69-1"><a href="basic-data-wrangling-with-tidyverse.html#cb69-1"></a>summary_data &lt;-<span class="st"> </span>new_dataframe <span class="op">%&gt;%</span></span>
<span id="cb69-2"><a href="basic-data-wrangling-with-tidyverse.html#cb69-2"></a><span class="st">  </span><span class="kw">group_by</span>(Day) <span class="op">%&gt;%</span></span>
<span id="cb69-3"><a href="basic-data-wrangling-with-tidyverse.html#cb69-3"></a><span class="st">  </span><span class="kw">summarize</span>(<span class="dt">average_tweets =</span> <span class="kw">mean</span>(Tweets),</span>
<span id="cb69-4"><a href="basic-data-wrangling-with-tidyverse.html#cb69-4"></a>            <span class="dt">average_users =</span> <span class="kw">mean</span>(Users))</span>
<span id="cb69-5"><a href="basic-data-wrangling-with-tidyverse.html#cb69-5"></a></span>
<span id="cb69-6"><a href="basic-data-wrangling-with-tidyverse.html#cb69-6"></a>summary_data</span></code></pre></div>
<pre><code>## # A tibble: 7 x 3
##   Day       average_tweets average_users
##   &lt;fct&gt;              &lt;dbl&gt;         &lt;dbl&gt;
## 1 Friday               3             1  
## 2 Monday              37            12.3
## 3 Saturday           140.           46.5
## 4 Sunday              48            16  
## 5 Thursday            25.5           8.5
## 6 Tuesday            145            48  
## 7 Wednesday          138            46</code></pre>
</div>
<div id="arrange" class="section level2">
<h2><span class="header-section-number">3.4</span> Arrange</h2>
<p>To explore a data set it can be useful to sort the data (e.g.: from the lowest to the highest number of a variable). With tidyverse, we can order a data.frame by using the function <em>arrange</em>.</p>
<div class="sourceCode" id="cb71"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb71-1"><a href="basic-data-wrangling-with-tidyverse.html#cb71-1"></a>summary_data  <span class="op">%&gt;%</span></span>
<span id="cb71-2"><a href="basic-data-wrangling-with-tidyverse.html#cb71-2"></a><span class="st">  </span><span class="kw">arrange</span>(average_tweets)</span></code></pre></div>
<pre><code>## # A tibble: 7 x 3
##   Day       average_tweets average_users
##   &lt;fct&gt;              &lt;dbl&gt;         &lt;dbl&gt;
## 1 Friday               3             1  
## 2 Thursday            25.5           8.5
## 3 Monday              37            12.3
## 4 Sunday              48            16  
## 5 Wednesday          138            46  
## 6 Saturday           140.           46.5
## 7 Tuesday            145            48</code></pre>
<p>To order data from the highest to the lowest values (a descending order) the <em>minus</em> sign has to be added.</p>
<div class="sourceCode" id="cb73"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb73-1"><a href="basic-data-wrangling-with-tidyverse.html#cb73-1"></a>summary_data <span class="op">%&gt;%</span></span>
<span id="cb73-2"><a href="basic-data-wrangling-with-tidyverse.html#cb73-2"></a><span class="st">  </span><span class="kw">arrange</span>(<span class="op">-</span>average_tweets)</span></code></pre></div>
<pre><code>## # A tibble: 7 x 3
##   Day       average_tweets average_users
##   &lt;fct&gt;              &lt;dbl&gt;         &lt;dbl&gt;
## 1 Tuesday            145            48  
## 2 Saturday           140.           46.5
## 3 Wednesday          138            46  
## 4 Sunday              48            16  
## 5 Monday              37            12.3
## 6 Thursday            25.5           8.5
## 7 Friday               3             1</code></pre>
<div class="sourceCode" id="cb75"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb75-1"><a href="basic-data-wrangling-with-tidyverse.html#cb75-1"></a><span class="co"># or</span></span>
<span id="cb75-2"><a href="basic-data-wrangling-with-tidyverse.html#cb75-2"></a><span class="co"># arrange(desc(average_tweets))</span></span></code></pre></div>
</div>
<div id="filter" class="section level2">
<h2><span class="header-section-number">3.5</span> Filter</h2>
<p>The function <em>filter</em> keeps the cases we want to focus on. The arguments of this function represent a condition that has to be fulfilled: the name of the column that has to be filtered, and the column values to be kept. For instance, we may want to keep just the rows that, in the column “Day”, correspond to Tuesday.</p>
<div class="sourceCode" id="cb76"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb76-1"><a href="basic-data-wrangling-with-tidyverse.html#cb76-1"></a>new_dataframe <span class="op">%&gt;%</span></span>
<span id="cb76-2"><a href="basic-data-wrangling-with-tidyverse.html#cb76-2"></a><span class="st">  </span><span class="kw">filter</span>(Day <span class="op">==</span><span class="st"> &quot;Tuesday&quot;</span>)</span></code></pre></div>
<pre><code>##   ID     Day Tweets Users
## 1  2 Tuesday    261    87
## 2  4 Tuesday     29     9</code></pre>
<p>Or the rows including a number of tweets higher than or equal to 50.</p>
<div class="sourceCode" id="cb78"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb78-1"><a href="basic-data-wrangling-with-tidyverse.html#cb78-1"></a>new_dataframe <span class="op">%&gt;%</span></span>
<span id="cb78-2"><a href="basic-data-wrangling-with-tidyverse.html#cb78-2"></a><span class="st">  </span><span class="kw">filter</span>(Tweets <span class="op">&gt;=</span><span class="st"> </span><span class="dv">50</span>)</span></code></pre></div>
<pre><code>##   ID       Day Tweets Users
## 1  2   Tuesday    261    87
## 2  5    Monday     54    18
## 3  6 Wednesday    234    78
## 4 10  Saturday    267    89
## 5 11    Sunday     87    29</code></pre>
<p>It is also possible to use multiple conditions at the same time.</p>
<div class="sourceCode" id="cb80"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb80-1"><a href="basic-data-wrangling-with-tidyverse.html#cb80-1"></a>new_dataframe <span class="op">%&gt;%</span></span>
<span id="cb80-2"><a href="basic-data-wrangling-with-tidyverse.html#cb80-2"></a><span class="st">  </span><span class="kw">filter</span>(Tweets <span class="op">&gt;=</span><span class="st"> </span><span class="dv">50</span>,</span>
<span id="cb80-3"><a href="basic-data-wrangling-with-tidyverse.html#cb80-3"></a>         Users <span class="op">&gt;</span><span class="st"> </span><span class="dv">30</span>)</span></code></pre></div>
<pre><code>##   ID       Day Tweets Users
## 1  2   Tuesday    261    87
## 2  6 Wednesday    234    78
## 3 10  Saturday    267    89</code></pre>
</div>
<div id="select" class="section level2">
<h2><span class="header-section-number">3.6</span> Select</h2>
<p><strong>Select</strong> is used to keep just some of the columns of the original data.frame. For instance, we can apply the function in order to keep just the column “Day” and “Tweets”.</p>
<div class="sourceCode" id="cb82"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb82-1"><a href="basic-data-wrangling-with-tidyverse.html#cb82-1"></a>new_dataframe <span class="op">%&gt;%</span></span>
<span id="cb82-2"><a href="basic-data-wrangling-with-tidyverse.html#cb82-2"></a><span class="st">  </span><span class="kw">select</span>(Day, Tweets)</span></code></pre></div>
<pre><code>##          Day Tweets
## 1     Monday     12
## 2    Tuesday    261
## 3     Monday     45
## 4    Tuesday     29
## 5     Monday     54
## 6  Wednesday    234
## 7   Thursday     45
## 8  Wednesday     42
## 9   Thursday      6
## 10  Saturday    267
## 11    Sunday     87
## 12    Friday      3
## 13  Saturday     12
## 14    Sunday      9</code></pre>
</div>
<div id="count-occurrences" class="section level2">
<h2><span class="header-section-number">3.7</span> Count occurrences</h2>
<p>A useful operation to perform when summarizing data, is to count the occurrences of a certain variable (mostly qualitative). For instance, to count how many times the name of each day occurs it can be used the function <strong>n()</strong> inside the <em>summarize</em> function.</p>
<div class="sourceCode" id="cb84"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb84-1"><a href="basic-data-wrangling-with-tidyverse.html#cb84-1"></a>new_dataframe <span class="op">%&gt;%</span></span>
<span id="cb84-2"><a href="basic-data-wrangling-with-tidyverse.html#cb84-2"></a><span class="st">  </span><span class="kw">group_by</span>(Day) <span class="op">%&gt;%</span></span>
<span id="cb84-3"><a href="basic-data-wrangling-with-tidyverse.html#cb84-3"></a><span class="st">  </span><span class="kw">summarize</span>(<span class="dt">average_tweets =</span> <span class="kw">mean</span>(Tweets),</span>
<span id="cb84-4"><a href="basic-data-wrangling-with-tidyverse.html#cb84-4"></a>            <span class="dt">average_users =</span> <span class="kw">mean</span>(Users),</span>
<span id="cb84-5"><a href="basic-data-wrangling-with-tidyverse.html#cb84-5"></a>            <span class="dt">day_occurrences =</span> <span class="kw">n</span>())</span></code></pre></div>
<pre><code>## # A tibble: 7 x 4
##   Day       average_tweets average_users day_occurrences
##   &lt;fct&gt;              &lt;dbl&gt;         &lt;dbl&gt;           &lt;int&gt;
## 1 Friday               3             1                 1
## 2 Monday              37            12.3               3
## 3 Saturday           140.           46.5               2
## 4 Sunday              48            16                 2
## 5 Thursday            25.5           8.5               2
## 6 Tuesday            145            48                 2
## 7 Wednesday          138            46                 2</code></pre>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="getting-started-with-r.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="readings.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/nicolarighetti/Introduction-to-Time-Series-Analysis-With-R/edit/master/02-Getting-Started-with-R.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": "https://github.com/nicolarighetti/Introduction-to-Time-Series-Analysis-With-R/blob/master/02-Getting-Started-with-R.Rmd",
"text": null
},
"download": null,
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
